#!/usr/bin/env bash

add_repo() {
grep -q 'deb http://http.us.debian.org/debian wheezy main contrib non-free' '/etc/apt/sources.list' || echo "deb http://http.us.debian.org/debian wheezy main contrib non-free" >> /etc/apt/sources.list;
}

edit_config() {
sed -i 's/#phyint de1 disable/phyint eth0 disable/g' /etc/pimd.conf
}

main() {
add_repo
echo "Repository Added"
apt-get update
echo "Packaged Library Updated"
apt-get -y install pimd
echo "pimd Installed"
echo "Stopping pimd for Config Edit"
service pimd stop
edit_config
echo "Starting pimd"
service pimd start

}

main "$@"
